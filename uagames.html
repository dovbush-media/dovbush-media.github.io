---
layout: default
title: –ö–∞—Ç–∞–ª–æ–≥ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö —ñ–≥–æ—Ä
description: –ö–∞—Ç–∞–ª–æ–≥ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö —ñ–≥–æ—Ä —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ü—ñ–Ω
---
<style>
  :root { 
    --ua-blue: #0057b7; 
    --ua-gold: #ffd700; 
    --steam-dark: #171a21; 
    --steam-light: #2a475e;
    --accent: #66c0f4;
    --text-main: #c7d5e0;
    --text-hover: #ffffff;
    --input-bg: rgba(0, 0, 0, 0.25);
    --card-bg: rgba(22, 32, 45, 0.65);
    --card-hover: rgba(42, 71, 94, 0.85);
    --border-color: rgba(62, 108, 141, 0.4);
  }

  /* –°–∫—Ä–æ–ª —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥—É, –Ω–µ –≥–ª–æ–±–∞–ª—å–Ω–∏–π */
  ::-webkit-scrollbar { width: 10px; }
  ::-webkit-scrollbar-track { background: #0f1216; }
  ::-webkit-scrollbar-thumb { background: #3d6c8d; border-radius: 5px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--accent); }

  .catalog-container { 
    max-width: 1140px; 
    margin: 0 auto; 
    padding: 30px 20px;
    color: var(--text-main);
    font-size: 15px;
  }

  /* –ö–ù–û–ü–ö–ê –§–Ü–õ–¨–¢–†–Ü–í */
  .filter-toggle-wrapper {
    margin-bottom: 15px;
    display: flex;
    justify-content: flex-start;
  }

  .btn-filter-toggle {
    background: linear-gradient(to right, #2a475e, #1b2838);
    color: var(--accent);
    border: 1px solid var(--border-color);
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 13px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 1px;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
  }

  .btn-filter-toggle:hover {
    border-color: var(--accent);
    color: #fff;
    box-shadow: 0 0 12px rgba(102, 192, 244, 0.3);
  }

  .btn-filter-toggle .icon {
    font-size: 16px;
    transition: transform 0.3s ease;
  }

  .btn-filter-toggle.active .icon {
    transform: rotate(180deg);
  }

  /* –ü–ê–ù–ï–õ–¨ –§–Ü–õ–¨–¢–†–Ü–í */
  .filter-panel {
    display: none;
    background: rgba(30, 40, 55, 0.7);
    backdrop-filter: blur(12px);
    padding: 25px; 
    border-radius: 10px; 
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 10px 35px rgba(0,0,0,0.4);
    margin-bottom: 30px; 
    flex-wrap: wrap; gap: 20px;
    align-items: flex-end;
    animation: fadeInSlide 0.4s ease forwards;
  }

  .filter-panel.show {
    display: flex;
  }

  @keyframes fadeInSlide {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .filter-group { display: flex; flex-direction: column; gap: 8px; flex: 1 1 160px; }
  
  .filter-group label { 
    font-size: 12px; 
    color: var(--accent); 
    font-weight: bold; 
    text-transform: uppercase; 
    letter-spacing: 1px;
    text-shadow: 0 0 5px rgba(102, 192, 244, 0.3);
  }

  .filter-group input[type="text"], 
  .filter-group input[type="number"], 
  .filter-group select {
    background: var(--input-bg); 
    border: 1px solid var(--border-color); 
    color: #fff; 
    padding: 10px 12px; 
    border-radius: 5px; 
    outline: none; 
    font-size: 13px; 
    width: 100%; 
    box-sizing: border-box;
    transition: all 0.25s ease;
  }

  .filter-group input:focus, .filter-group select:focus {
    border-color: var(--accent);
    background: rgba(0,0,0,0.45);
    box-shadow: 0 0 10px rgba(102, 192, 244, 0.25);
  }

  .filter-group input[type="range"] { -webkit-appearance: none; background: transparent; width: 100%; padding: 6px 0; }
  .filter-group input[type="range"]::-webkit-slider-runnable-track { width: 100%; height: 6px; background: #101822; border-radius: 3px; border: 1px solid #3d6c8d; }
  .filter-group input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; height: 18px; width: 18px; border-radius: 50%; background: var(--accent); cursor: pointer; margin-top: -6px; box-shadow: 0 0 6px #000; }
  
  .range-val { display: flex; justify-content: space-between; font-size: 11px; color: var(--accent); margin-top: 4px; font-weight: bold; }

  .catalog-header {
    display: grid; 
    grid-template-columns: 120px 1fr 80px 140px 80px 130px; 
    gap: 15px; 
    padding: 12px 20px; 
    margin-bottom: 12px;
    background: linear-gradient(90deg, #1b2838 0%, #2a475e 100%);
    border-radius: 6px; 
    box-shadow: 0 5px 10px rgba(0,0,0,0.3);
    border-bottom: 3px solid var(--accent);
  }
  .header-col { 
    font-size: 12px; font-weight: 800; color: var(--text-main); 
    text-transform: uppercase; cursor: pointer; user-select: none; 
    letter-spacing: 0.8px; transition: color 0.2s;
  }
  .header-col:hover { color: #fff; text-shadow: 0 0 10px var(--accent); }

  .game-row { 
    background: var(--card-bg); 
    margin-bottom: 10px; 
    border-radius: 6px; 
    display: grid; 
    grid-template-columns: 120px 1fr 80px 140px 80px 130px; 
    gap: 15px; 
    align-items: center; 
    cursor: pointer; 
    transition: all 0.25s ease-in-out; 
    border: 1px solid transparent; 
    overflow: hidden;
    min-height: 70px;
  }
  
  .game-row:hover { 
    background: linear-gradient(90deg, rgba(62, 89, 121, 0.45) 0%, rgba(42, 71, 94, 0.7) 100%);
    border-color: rgba(102, 192, 244, 0.4); 
    transform: scale(1.005) translateX(4px); 
    box-shadow: 0 6px 15px rgba(0,0,0,0.5);
    z-index: 2;
  }
  
  .game-img-small { 
    width: 120px; height: 68px; 
    object-fit: cover; flex-shrink: 0; 
    mask-image: linear-gradient(to right, black 90%, transparent 100%);
  }
  
  .game-main-info { 
    padding: 8px 0; 
    font-weight: 600; 
    color: var(--text-hover); 
    font-size: 17px; 
    line-height: 1.25;
    text-shadow: 1px 1px 3px rgba(0,0,0,1);
    word-wrap: break-word;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px;
  }

  .badge-ea-list {
    background: linear-gradient(90deg, #0057b7, #1a44c2);
    color: #fff;
    font-size: 11px;
    padding: 2px 6px;
    border-radius: 3px;
    font-weight: bold;
    text-transform: uppercase;
    white-space: nowrap;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
  }

  .status-text-upcoming {
    color: #88929a;
    font-style: italic;
    font-size: 14px;
    font-weight: bold;
  }

  .status-demo { 
    background: #3d6c8d; 
    color: #fff; 
    padding: 4px 8px; 
    border-radius: 2px; 
    font-size: 13px;
    display: inline-block;
  }
  .status-demo:hover { background: #4f82a8; }

  .col-center { text-align: center; color: #88929a; font-size: 14px; }
  .col-rating { 
    text-align: center; font-weight: bold; font-size: 15px; 
    background: rgba(0,0,0,0.4); padding: 4px 6px; border-radius: 4px;
    width: 40px; margin: 0 auto;
  }
  
  .game-price-block { 
    padding-right: 15px; display: flex; justify-content: flex-end; align-items: center; gap: 10px; 
  }
  .list-old-price { color: #6a7780; text-decoration: line-through; font-size: 12px; }
  .list-new-price { color: #fff; font-size: 16px; font-weight: bold; text-shadow: 0 0 5px rgba(0,0,0,0.5); }
  .list-discount-box { 
    color: #beee11; padding: 4px 6px; font-weight: bold; border-radius: 3px; font-size: 13px; 
    box-shadow: 0 2px 6px rgba(0,0,0,0.5);
  }

  /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     –ù–û–í–ò–ô MODAL
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
  #gameModal {
    display: none;
    position: fixed;
    z-index: 9999;
    inset: 0;
    background: rgba(0, 0, 0, 0.88);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    overflow-y: auto;
    overscroll-behavior: contain;
    padding: 20px 16px 40px;
    align-items: flex-start;
    justify-content: center;
  }
  #gameModal.open { display: flex; }

  .gm-card {
    background: #141d26;
    width: 100%;
    max-width: 960px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 32px 80px rgba(0,0,0,0.8), 0 0 0 1px rgba(102,192,244,0.06);
    position: relative;
    overflow: hidden;
    animation: modalIn 0.28s cubic-bezier(0.22,1,0.36,1);
    margin: auto;
  }
  @keyframes modalIn {
    from { opacity: 0; transform: translateY(24px) scale(0.97); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
  }

  /* Hero banner */
  .gm-hero {
    position: relative;
    width: 100%;
    aspect-ratio: 16/6;
    overflow: hidden;
  }
  .gm-hero__blur {
    position: absolute;
    inset: -10px;
    background-size: cover;
    background-position: center;
    filter: blur(18px) brightness(0.35) saturate(1.4);
    transform: scale(1.05);
    transition: background-image 0.4s ease;
  }
  .gm-hero__img {
    position: relative;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center top;
  }
  .gm-hero__gradient {
    position: absolute;
    inset: 0;
    background: linear-gradient(to bottom, transparent 40%, #141d26 100%);
  }

  /* Close btn */
  .gm-close {
    position: absolute;
    top: 14px;
    right: 14px;
    z-index: 10;
    background: rgba(0,0,0,0.55);
    border: 1px solid rgba(255,255,255,0.12);
    color: #c7d5e0;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    backdrop-filter: blur(8px);
  }
  .gm-close:hover { background: rgba(255,255,255,0.18); color: #fff; }

  .gm-body {
    padding: 0 24px 28px;
    margin-top: -30px;
    position: relative;
  }

  .gm-header {
    display: flex;
    align-items: flex-end;
    gap: 16px;
    margin-bottom: 20px;
  }
  .gm-cover {
    width: 88px;
    height: 124px;
    border-radius: 8px;
    object-fit: cover;
    flex-shrink: 0;
    border: 2px solid rgba(255,255,255,0.1);
    box-shadow: 0 8px 24px rgba(0,0,0,0.6);
  }
  .gm-title-block { flex: 1; min-width: 0; padding-bottom: 4px; }
  .gm-title {
    font-size: clamp(20px, 4vw, 30px);
    font-weight: 800;
    letter-spacing: 0.5px;
    line-height: 1.15;
    color: #fff;
    margin: 0 0 10px;
    word-break: break-word;
  }
  .gm-badges { display: flex; flex-wrap: wrap; gap: 6px; }
  .gm-badge {
    font-size: 11px;
    font-weight: 700;
    padding: 3px 9px;
    border-radius: 4px;
    letter-spacing: 0.5px;
    text-transform: uppercase;
  }
  .gm-badge--ea   { background: #1a3a6e; color: #67c1f5; border: 1px solid #2a5a9e; }
  .gm-badge--free { background: #1a3a1a; color: #57e357; border: 1px solid #2a6a2a; }
  .gm-badge--demo { background: #2a1a3a; color: #c57ef5; border: 1px solid #5a2a8a; }
  .gm-badge--coming { background: #2a2a1a; color: #f5c842; border: 1px solid #7a6a1a; }

  .gm-grid {
    display: grid;
    grid-template-columns: 1fr 280px;
    gap: 20px;
    align-items: start;
  }

  .gm-main-view {
    position: relative;
    width: 100%;
    aspect-ratio: 16/9;
    background: #000;
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid rgba(255,255,255,0.07);
  }
  .gm-main-view img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
  }
  .gm-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0,0,0,0.6);
    border: none;
    color: #c7d5e0;
    width: 36px;
    height: 60px;
    cursor: pointer;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    z-index: 5;
  }
  .gm-arrow:hover { background: rgba(102,192,244,0.3); color: #fff; }
  .gm-arrow--left  { left: 0; border-radius: 0 6px 6px 0; }
  .gm-arrow--right { right: 0; border-radius: 6px 0 0 6px; }

  .gm-thumbs {
    display: flex;
    gap: 6px;
    margin-top: 8px;
    overflow-x: auto;
    padding-bottom: 4px;
    scrollbar-width: thin;
    scrollbar-color: #3d6c8d transparent;
  }
  .gm-thumb {
    width: 96px;
    height: 54px;
    object-fit: cover;
    flex-shrink: 0;
    cursor: pointer;
    border-radius: 4px;
    opacity: 0.55;
    border: 2px solid transparent;
    transition: all 0.18s;
  }
  .gm-thumb:hover { opacity: 0.85; }
  .gm-thumb.active { opacity: 1; border-color: #66c0f4; }

  .gm-desc {
    color: #9baab8;
    font-size: 13.5px;
    line-height: 1.65;
    margin-top: 14px;
  }

  .gm-side { display: flex; flex-direction: column; gap: 14px; }

  .gm-meta {
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.07);
    border-radius: 8px;
    padding: 14px;
  }
  .gm-meta-row {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    padding: 5px 0;
    font-size: 12.5px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }
  .gm-meta-row:last-child { border-bottom: none; }
  .gm-meta-row__label { color: #67c1f5; font-weight: 600; }
  .gm-meta-row__val { color: #c7d5e0; text-align: right; max-width: 60%; word-break: break-word; }

  .gm-rating-bar {
    height: 4px;
    border-radius: 2px;
    background: rgba(255,255,255,0.08);
    margin-top: 6px;
    overflow: hidden;
  }
  .gm-rating-fill {
    height: 100%;
    border-radius: 2px;
    transition: width 0.5s ease;
  }

  .gm-price-box {
    background: linear-gradient(145deg, #1a2738, #16202d);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 8px;
    padding: 16px;
  }
  .gm-price-inner {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 6px;
  }
  .gm-discount-badge {
    background: #4c6b22;
    color: #beee11;
    padding: 4px 8px;
    border-radius: 4px;
    font-weight: 800;
    font-size: 14px;
  }
  .gm-old-price { color: #6a7780; text-decoration: line-through; font-size: 13px; }
  .gm-new-price { color: #fff; font-size: 26px; font-weight: 800; line-height: 1; }
  .gm-free-label { font-size: 20px; font-weight: 800; }

  .gm-hist {
    font-size: 11px;
    color: #6a7780;
    border-top: 1px solid rgba(255,255,255,0.06);
    padding-top: 8px;
    margin-top: 8px;
    line-height: 1.9;
  }
  .gm-hist-low { color: #ffd700; font-weight: 600; }
  .gm-hist-2y  { color: #c7d5e0; font-weight: 600; }

  .gm-steam-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-top: 12px;
    background: linear-gradient(90deg, #1a90e0, #1040c0);
    color: #fff;
    text-decoration: none;
    padding: 13px;
    border-radius: 6px;
    font-weight: 700;
    font-size: 14px;
    letter-spacing: 0.5px;
    transition: all 0.2s;
    border: 1px solid rgba(255,255,255,0.1);
  }
  .gm-steam-btn:hover {
    background: linear-gradient(90deg, #2aa0f0, #1a50d0);
    box-shadow: 0 4px 20px rgba(26,144,224,0.4);
    transform: translateY(-1px);
  }

  .gm-sysreq {
    grid-column: 1 / -1;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    background: #0d1520;
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 8px;
    padding: 16px;
    font-size: 12px;
    color: #8a9ab0;
    line-height: 1.7;
    margin-top: 4px;
  }
  .gm-sysreq__title {
    color: #fff;
    font-weight: 700;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
    padding-bottom: 6px;
    border-bottom: 1px solid rgba(255,255,255,0.08);
  }

  /* --- –ú–û–ë–Ü–õ–¨–ù–ê –û–ü–¢–ò–ú–Ü–ó–ê–¶–Ü–Ø --- */
  @media screen and (max-width: 850px) {
    .catalog-container { padding: 15px 10px; }
    .catalog-header { display: none; }
    .game-row {
      grid-template-columns: 1fr;
      grid-template-areas: 
        "img"
        "title"
        "price";
      gap: 0;
      padding: 0 0 12px 0;
      height: auto;
      align-items: start;
      overflow: hidden;
    }
    .game-img-small {
      grid-area: img;
      width: 100%;
      height: 140px;
      border-radius: 6px 6px 0 0;
      mask-image: none;
      object-fit: cover;
      display: block;
    }
    .game-main-info {
      grid-area: title;
      font-size: 14px;
      padding: 10px 12px 4px;
      word-break: break-word;
      overflow-wrap: break-word;
    }
    .col-center, .col-rating { display: none; }
    .game-price-block {
      grid-area: price;
      justify-content: flex-start;
      padding: 4px 12px 0 12px;
      border-top: none;
      width: 100%;
      box-sizing: border-box;
      flex-wrap: wrap;
      gap: 6px;
    }
    .list-new-price { font-size: 15px; }
    .filter-group { flex: 1 1 45%; }

    /* Modal mobile */
    #gameModal { padding: 10px 8px 30px; }
    .gm-body { padding: 0 14px 22px; }
    .gm-grid { grid-template-columns: 1fr; }
    .gm-hero { aspect-ratio: 16/7; }
    .gm-cover { width: 68px; height: 96px; }
    .gm-sysreq { grid-template-columns: 1fr; }
  }

  @media screen and (max-width: 480px) {
    .filter-group { flex: 1 1 100%; }
    .game-img-small { height: 120px; }
    .gm-cover { width: 56px; height: 78px; }
    .gm-title { font-size: 18px; }
  }
</style>


<div class="catalog-container">
  <div class="filter-toggle-wrapper">
    <button class="btn-filter-toggle" onclick="toggleFilters(this)">
      <span class="icon">‚ñº</span>
      <span id="toggleText">–ü–æ–∫–∞–∑–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</span>
    </button>
  </div>

  <div class="filter-panel" id="filterPanel">
    <div class="filter-group"><label>–ü–æ—à—É–∫ –∑–∞ –Ω–∞–∑–≤–æ—é</label><input id="searchName" oninput="renderCatalog()" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É..." type="text" /></div>
    <div class="filter-group"><label>–ñ–∞–Ω—Ä</label><select id="filterGenre" onchange="renderCatalog()"><option value="">–í—Å—ñ –∂–∞–Ω—Ä–∏</option></select></div>
    <div class="filter-group"><label>–¢–µ–≥–∏</label><select id="filterTags" onchange="renderCatalog()"><option value="">–í—Å—ñ —Ç–µ–≥–∏</option></select></div>
    <div class="filter-group"><label>–†—ñ–∫</label><div style="display: flex; gap: 8px;"><select id="yearFrom" onchange="renderCatalog()"><option value="">–í—ñ–¥</option></select><select id="yearTo" onchange="renderCatalog()"><option value="">–î–æ</option></select></div></div>
    <div class="filter-group"><label>–¶—ñ–Ω–∞ (‚Ç¥)</label><div style="display: flex; gap: 8px;"><input id="priceFrom" oninput="renderCatalog()" type="number" /><input id="priceTo" oninput="renderCatalog()" type="number" /></div></div>
    <div class="filter-group"><label>–†–µ–π—Ç–∏–Ω–≥ (%)</label><input id="filterRating" max="100" oninput="updateRangeLabel(this); renderCatalog()" type="range" value="0" /><div class="range-val"><span>0%</span><span id="ratingVal">–£—Å—ñ</span><span>100%</span></div></div>
    <div class="filter-group"><label>–ó–Ω–∏–∂–∫–∞ (%)</label><input id="filterDiscount" max="100" oninput="updateRangeLabel(this); renderCatalog()" type="range" value="0" /><div class="range-val"><span>0%</span><span id="discountVal">–ë—É–¥—å-—è–∫–∞</span><span>100%</span></div></div>
    <div class="filter-group"><label>–°—Ç–∞—Ç—É—Å</label><select id="priceStatus" onchange="renderCatalog()"><option value="">–í—Å—ñ</option><option value="histLow">–Ü—Å—Ç–æ—Ä–∏—á–Ω–∏–π –ú—ñ–Ω—ñ–º—É–º</option><option value="low2Y">–ú—ñ–Ω—ñ–º—É–º –∑–∞ 2 —Ä–æ–∫–∏</option></select></div>
  </div>

  <div class="catalog-header">
    <div></div> <div class="header-col" onclick="setSort('title')">–ù–∞–∑–≤–∞</div>
    <div class="header-col col-center" onclick="setSort('year')">–†—ñ–∫</div>
    <div class="header-col col-center" onclick="setSort('genre')">–ñ–∞–Ω—Ä</div>
    <div class="header-col col-center" onclick="setSort('rating')">–í—ñ–¥–≥—É–∫–∏</div>
    <div class="header-col" onclick="setSort('price')" style="text-align: right;">–¶—ñ–Ω–∞</div>
  </div>

  <div id="catalogList">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê –ù–û–í–ò–ô MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="gameModal" onclick="handleOverlayClick(event)">
  <div class="gm-card">
    <button class="gm-close" onclick="closeModal()">‚úï</button>

    <!-- Hero -->
    <div class="gm-hero">
      <div class="gm-hero__blur" id="gmHeroBg"></div>
      <img class="gm-hero__img" id="gmHeroImg" src="" alt="">
      <div class="gm-hero__gradient"></div>
    </div>

    <!-- Body -->
    <div class="gm-body">
      <div class="gm-header">
        <img class="gm-cover" id="gmCover" src="" alt="">
        <div class="gm-title-block">
          <h2 class="gm-title" id="gmTitle"></h2>
          <div class="gm-badges" id="gmBadges"></div>
        </div>
      </div>

      <div class="gm-grid">
        <!-- –õ—ñ–≤–æ: –≥–∞–ª–µ—Ä–µ—è + –æ–ø–∏—Å -->
        <div>
          <div class="gm-main-view">
            <button class="gm-arrow gm-arrow--left" onclick="changeSlide(-1)">&#10094;</button>
            <img id="gmMainView" src="" alt="–°–∫—Ä—ñ–Ω—à–æ—Ç">
            <button class="gm-arrow gm-arrow--right" onclick="changeSlide(1)">&#10095;</button>
          </div>
          <div class="gm-thumbs" id="gmThumbs"></div>
          <div class="gm-desc" id="gmDesc"></div>
        </div>

        <!-- –ü—Ä–∞–≤–æ: –º–µ—Ç–∞ + —Ü—ñ–Ω–∞ -->
        <div class="gm-side">
          <div class="gm-meta" id="gmMeta"></div>
          <div class="gm-price-box" id="gmPriceBox"></div>
        </div>

        <!-- –°–∏—Å—Ç–µ–º–Ω—ñ –≤–∏–º–æ–≥–∏ (–ø–æ–≤–Ω–∞ —à–∏—Ä–∏–Ω–∞) -->
        <div class="gm-sysreq" id="gmSysreq" style="display:none"></div>
      </div>
    </div>
  </div>
</div>

<script>
  const fbUrl = "https://dovbushhub-default-rtdb.europe-west1.firebasedatabase.app/games.json";
  let games = {};
  let currentScreens = [];
  let currentIdx = 0;
  let currentSortField = 'title';
  let sortDirection = 1;

  function toggleFilters(btn) {
    const panel = document.getElementById('filterPanel');
    const text = document.getElementById('toggleText');
    const isShowing = panel.classList.toggle('show');
    btn.classList.toggle('active');
    text.innerText = isShowing ? '–°—Ö–æ–≤–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏' : '–ü–æ–∫–∞–∑–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏';
  }

  function fixDate(d) { return (!d || d === "" || d === "-") ? 'TBA' : new Date(d).toLocaleDateString('uk-UA'); }
  function getYearNum(d) { let y = new Date(d).getFullYear(); return isNaN(y) ? 0 : y; }
  function updateRangeLabel(el) { document.getElementById(el.id === 'filterRating' ? 'ratingVal' : 'discountVal').innerText = el.value > 0 ? el.value + '%' : (el.id === 'filterRating' ? '–£—Å—ñ' : '–ë—É–¥—å-—è–∫–∞'); }

  function setSort(field) {
    if (currentSortField === field) { sortDirection *= -1; } 
    else { currentSortField = field; sortDirection = 1; }
    renderCatalog();
  }

  async function loadGames() {
    try {
      const res = await fetch(fbUrl);
      games = await res.json();
      populateDropdowns();
      renderCatalog();
    } catch (e) { document.getElementById('catalogList').innerText = "–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö."; }
  }

  function populateDropdowns() {
    const genres = new Set(), tags = new Set(), years = new Set();
    Object.values(games).forEach(g => {
      if (g.genre) { g.genre.split(',').forEach(v => genres.add(v.trim())); }
      if (g.tags) g.tags.split(',').forEach(t => tags.add(t.trim()));
      let y = getYearNum(g.releaseDate); if (y) years.add(y);
    });
    const fill = (id, set) => [...set].sort().forEach(v => document.getElementById(id).add(new Option(v, v)));
    fill('filterGenre', genres); fill('filterTags', tags);
    [...years].sort((a,b)=>b-a).forEach(y => { document.getElementById('yearFrom').add(new Option(y, y)); document.getElementById('yearTo').add(new Option(y, y)); });
  }

  function renderCatalog() {
    const f = {
      name: document.getElementById('searchName').value.toLowerCase(),
      genre: document.getElementById('filterGenre').value,
      tag: document.getElementById('filterTags').value,
      yFrom: document.getElementById('yearFrom').value,
      yTo: document.getElementById('yearTo').value,
      pFrom: parseFloat(document.getElementById('priceFrom').value) || 0,
      pTo: parseFloat(document.getElementById('priceTo').value) || 999999,
      rating: parseInt(document.getElementById('filterRating').value),
      discount: parseInt(document.getElementById('filterDiscount').value),
      status: document.getElementById('priceStatus').value
    };

    let list = Object.values(games).filter(g => {
      const y = getYearNum(g.releaseDate);
      let matchStatus = true;
      if (f.status === 'histLow') matchStatus = g.currentPrice <= g.histLow;
      if (f.status === 'low2Y') matchStatus = g.currentPrice <= g.low2Y;
      const matchGenre = !f.genre || (g.genre && g.genre.split(',').map(s => s.trim()).includes(f.genre));
      return g.title.toLowerCase().includes(f.name) && 
             matchGenre && 
             (!f.tag || (g.tags && g.tags.includes(f.tag))) && 
             (!f.yFrom || y >= f.yFrom) && 
             (!f.yTo || y <= f.yTo) && 
             ( (g.stage === 'Upcoming' || g.stage === 'Demo') ? true : (g.currentPrice >= f.pFrom && g.currentPrice <= f.pTo) ) && 
             (g.rating || 0) >= f.rating && 
             (g.discount || 0) >= f.discount && 
             matchStatus;
    });

    list.sort((a, b) => {
      let valA, valB;
      switch (currentSortField) {
        case 'year': valA = getYearNum(a.releaseDate); valB = getYearNum(b.releaseDate); break;
        case 'price': valA = a.currentPrice; valB = b.currentPrice; break;
        case 'rating': valA = a.rating || 0; valB = b.rating || 0; break;
        case 'genre': valA = a.genre || ''; valB = b.genre || ''; break;
        default: valA = a.title.toLowerCase(); valB = b.title.toLowerCase();
      }
      return valA < valB ? -1 * sortDirection : (valA > valB ? 1 * sortDirection : 0);
    });

    document.getElementById('catalogList').innerHTML = list.map(g => {
      const cleanTitle = g.title.replace(/UA_DEV|UA/g, '').trim();
      const year = getYearNum(g.releaseDate) || '‚Äî';
      const ratingColor = (g.rating >= 80) ? '#66C0F4' : (g.rating >= 50 ? '#A3A3A3' : '#A13D2D');
      let discountColor = (g.currentPrice <= g.histLow) ? "#00a2ff" : (g.currentPrice <= g.low2Y ? "#4c6b22" : "#8a2a2a");
      const stage = g.stage || 'Released';
      
      let titleHtml = cleanTitle;
      if (stage.includes('Early Access')) {
        titleHtml += ` <span class="badge-ea-list">(–£ –¥–æ—á–∞—Å–Ω–æ–º—É –¥–æ—Å—Ç—É–ø—ñ)</span>`;
      }

      let priceHtml = '';
      if (stage.includes('Upcoming')) {
        priceHtml = `<div class="status-text-upcoming">–ù–µ–∑–∞–±–∞—Ä–æ–º</div>`;
      } else if (stage.includes('Demo')) {
        priceHtml = `<div class="status-block"><span class="status-demo">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –î–µ–º–æ</span></div>`;
      } else if (stage.includes('Free')) {
        priceHtml = `<div class="status-text-upcoming">–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ</div>`;
      } else {
        if (g.currentPrice === 0) {
          priceHtml = `<span class="badge-free-list">–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ</span>`;
        } else if (g.discount > 0) {
          priceHtml = `
            <div class="list-discount-box" style="background: ${discountColor}">-${g.discount}%</div>
            <div style="display: flex; flex-direction: column; align-items: flex-end;">
              <span class="list-old-price">${g.basePrice} ‚Ç¥</span>
              <span class="list-new-price">${g.currentPrice} ‚Ç¥</span>
            </div>`;
        } else {
          priceHtml = `<span class="list-new-price">${g.currentPrice} ‚Ç¥</span>`;
        }
      }

      return `
        <div class="game-row" onclick="openGame('${g.appId}')">
          <img src="${g.img}" class="game-img-small">
          <div class="game-main-info" data-rating="${g.rating || '-'}">${titleHtml}</div>
          <div class="col-center">${year}</div>
          <div class="col-center" style="font-size:12px">${g.genre || '-'}</div>
          <div class="col-rating" style="color:${g.rating ? ratingColor : '#888'}">${g.rating || '-'}</div>
          <div class="game-price-block">${priceHtml}</div>
        </div>`;
    }).join('') || '<div style="text-align:center; padding:50px; color:#88929a;">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</div>';
  }

  /* ‚ïê‚ïê –ù–û–í–ò–ô openGame ‚ïê‚ïê */
  function openGame(id) {
    const g = games[id];
    if (!g) return;

    currentScreens = (g.screenshots || []).filter(Boolean);
    currentIdx = 0;

    const heroSrc = currentScreens[0] || g.img;
    document.getElementById('gmHeroBg').style.backgroundImage = `url(${heroSrc})`;
    document.getElementById('gmHeroImg').src = heroSrc;
    document.getElementById('gmHeroImg').alt = g.title;
    document.getElementById('gmCover').src = g.img;
    document.getElementById('gmCover').alt = g.title;
    document.getElementById('gmTitle').textContent = g.title.replace(/UA_DEV|UA/g, '').trim();

    /* –ë–µ–π–¥–∂—ñ */
    const stage = g.stage || 'Released';
    let badgesHtml = '';
    if (stage.includes('Early Access')) badgesHtml += '<span class="gm-badge gm-badge--ea">Early Access</span>';
    if (stage.includes('Free') || g.currentPrice === 0) badgesHtml += '<span class="gm-badge gm-badge--free">Free to Play</span>';
    if (stage.includes('Demo'))    badgesHtml += '<span class="gm-badge gm-badge--demo">Demo</span>';
    if (stage.includes('Upcoming')) badgesHtml += '<span class="gm-badge gm-badge--coming">–ù–µ–∑–∞–±–∞—Ä–æ–º</span>';
    document.getElementById('gmBadges').innerHTML = badgesHtml;

    /* –ì–∞–ª–µ—Ä–µ—è */
    document.getElementById('gmMainView').src = currentScreens[0] || g.img;
    document.getElementById('gmThumbs').innerHTML = currentScreens.map((src, i) =>
      `<img src="${src}" class="gm-thumb${i===0?' active':''}" onclick="setSlide(${i}, this)" loading="lazy">`
    ).join('');

    /* –û–ø–∏—Å */
    document.getElementById('gmDesc').textContent = g.description || '';

    /* –ú–µ—Ç–∞ */
    const dp = (g.devPublisher || '').split(',');
    const devName = dp[0]?.trim() || '–ù/–î';
    const pubName = dp[1]?.trim() || devName;

    let displayDate = fixDate(g.releaseDate);
    if (stage.includes('Upcoming')) {
      const parts = stage.split(',');
      if (parts.length > 1) displayDate = parts[1].trim();
    }

    let ratingHtml = '';
    if (g.rating != null && g.rating > 0) {
      const color = g.rating >= 80 ? '#57e357' : g.rating >= 60 ? '#ffd700' : '#ff6b6b';
      const label = g.rating >= 80 ? '–î—É–∂–µ –ø–æ–∑–∏—Ç–∏–≤–Ω—ñ' : g.rating >= 60 ? '–ó–º—ñ—à–∞–Ω—ñ' : '–ü–µ—Ä–µ–≤–∞–∂–Ω–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ñ';
      ratingHtml = `
        <div class="gm-meta-row">
          <span class="gm-meta-row__label">–í—ñ–¥–≥—É–∫–∏</span>
          <span class="gm-meta-row__val" style="color:${color};font-weight:700">${g.rating}% ‚Äî ${label}</span>
        </div>
        <div class="gm-rating-bar">
          <div class="gm-rating-fill" style="width:${g.rating}%;background:linear-gradient(90deg,${color}88,${color})"></div>
        </div>`;
    }

    document.getElementById('gmMeta').innerHTML = `
      <div class="gm-meta-row">
        <span class="gm-meta-row__label">–ñ–∞–Ω—Ä</span>
        <span class="gm-meta-row__val">${g.genre || '–ù/–î'}</span>
      </div>
      <div class="gm-meta-row">
        <span class="gm-meta-row__label">–†–æ–∑—Ä–æ–±–Ω–∏–∫</span>
        <span class="gm-meta-row__val">${devName}</span>
      </div>
      <div class="gm-meta-row">
        <span class="gm-meta-row__label">–í–∏–¥–∞–≤–µ—Ü—å</span>
        <span class="gm-meta-row__val">${pubName}</span>
      </div>
      <div class="gm-meta-row">
        <span class="gm-meta-row__label">–†–µ–ª—ñ–∑</span>
        <span class="gm-meta-row__val">${displayDate}</span>
      </div>
      ${ratingHtml}
    `;

    /* –¶—ñ–Ω–∞ */
    let priceHtml = '';
    if (stage.includes('Upcoming')) {
      priceHtml = `<div class="gm-free-label" style="color:#f5c842">‚è≥ –ù–µ–∑–∞–±–∞—Ä–æ–º</div>`;
    } else if (stage.includes('Demo')) {
      priceHtml = `<div class="gm-free-label" style="color:#c57ef5">üéÆ Demo</div>`;
    } else if (stage.includes('Free') || g.currentPrice === 0) {
      priceHtml = `<div class="gm-free-label" style="color:#57e357">üÜì –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ</div>`;
    } else {
      priceHtml = `<div class="gm-price-inner">`;
      if (g.discount > 0) priceHtml += `<span class="gm-discount-badge">-${g.discount}%</span>`;
      if (g.discount > 0) priceHtml += `<span class="gm-old-price">${g.basePrice} ‚Ç¥</span>`;
      priceHtml += `<span class="gm-new-price">${g.currentPrice} ‚Ç¥</span></div>`;
      if (g.histLow) {
        priceHtml += `
          <div class="gm-hist">
            –Ü—Å—Ç. –º—ñ–Ω—ñ–º—É–º: <span class="gm-hist-low">${g.histLow} ‚Ç¥</span> (${fixDate(g.histLowDate)})<br>
            –ú—ñ–Ω—ñ–º—É–º –∑–∞ 2 —Ä–æ–∫–∏: <span class="gm-hist-2y">${g.low2Y || g.currentPrice} ‚Ç¥</span>
          </div>`;
      }
    }
    priceHtml += `<a href="${g.link}" target="_blank" class="gm-steam-btn"><i class="fab fa-steam"></i> –í—ñ–¥–∫—Ä–∏—Ç–∏ –≤ Steam</a>`;
    document.getElementById('gmPriceBox').innerHTML = priceHtml;

    /* –°–∏—Å—Ç–µ–º–Ω—ñ –≤–∏–º–æ–≥–∏ */
    const sysEl = document.getElementById('gmSysreq');
    if (g.sysReq) {
      const reqs = g.sysReq.split('||');
      sysEl.style.display = 'grid';
      sysEl.innerHTML = `
        <div>
          <div class="gm-sysreq__title">–ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –≤–∏–º–æ–≥–∏</div>
          ${(reqs[0] || '').replace(/\n/g, '<br>')}
        </div>
        <div>
          <div class="gm-sysreq__title">–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –≤–∏–º–æ–≥–∏</div>
          ${(reqs[1] || '‚Äî').replace(/\n/g, '<br>')}
        </div>`;
    } else {
      sysEl.style.display = 'none';
    }

    /* –í—ñ–¥–∫—Ä–∏—Ç–∏ */
    const modal = document.getElementById('gameModal');
    modal.classList.add('open');
    document.body.style.overflow = 'hidden';
    modal.scrollTop = 0;
  }

  /* ‚ïê‚ïê –°–ª–∞–π–¥–µ—Ä ‚ïê‚ïê */
  function setSlide(idx, el) {
    currentIdx = idx;
    const src = currentScreens[idx];
    document.getElementById('gmMainView').src = src;
    document.getElementById('gmHeroBg').style.backgroundImage = `url(${src})`;
    document.querySelectorAll('.gm-thumb').forEach(t => t.classList.remove('active'));
    el.classList.add('active');
    el.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
  }

  function changeSlide(step) {
    if (!currentScreens.length) return;
    currentIdx = (currentIdx + step + currentScreens.length) % currentScreens.length;
    const src = currentScreens[currentIdx];
    document.getElementById('gmMainView').src = src;
    document.getElementById('gmHeroBg').style.backgroundImage = `url(${src})`;
    const thumbs = document.querySelectorAll('.gm-thumb');
    thumbs.forEach(t => t.classList.remove('active'));
    if (thumbs[currentIdx]) {
      thumbs[currentIdx].classList.add('active');
      thumbs[currentIdx].scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
    }
  }

  /* ‚ïê‚ïê –ó–∞–∫—Ä–∏—Ç–∏ ‚ïê‚ïê */
  function closeModal() {
    document.getElementById('gameModal').classList.remove('open');
    document.body.style.overflow = '';
  }

  function handleOverlayClick(e) {
    if (e.target === document.getElementById('gameModal')) closeModal();
  }

  document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

  loadGames();
</script>
