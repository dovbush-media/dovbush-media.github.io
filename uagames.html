---
layout: default
title: –ö–∞—Ç–∞–ª–æ–≥ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö —ñ–≥–æ—Ä
description: –ö–∞—Ç–∞–ª–æ–≥ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –≤—ñ–¥–µ–æ—ñ–≥–æ—Ä —É Steam ‚Äî —Ü—ñ–Ω–∏, —Ä–µ–π—Ç–∏–Ω–≥–∏, –æ–≥–ª—è–¥–∏, —Ñ—ñ–ª—å—Ç—Ä–∏
---
<style>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   –ó–ú–Ü–ù–ù–Ü
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
:root {
  --c-bg:       #0d1117;
  --c-surface:  #161b22;
  --c-card:     #1c2333;
  --c-border:   rgba(255,255,255,0.07);
  --c-blue:     #0057b7;
  --c-gold:     #ffd700;
  --c-accent:   #58a6ff;
  --c-green:    #3fb950;
  --c-red:      #f85149;
  --c-text:     #e6edf3;
  --c-muted:    #8b949e;
  --c-hover:    rgba(88,166,255,0.08);
  --radius:     10px;
  --radius-sm:  6px;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   –ó–ê–ì–ê–õ–¨–ù–ò–ô –ö–û–ù–¢–ï–ô–ù–ï–†
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.cat-wrap {
  max-width: 1200px;
  margin: 0 auto;
  padding: 28px 16px 60px;
  font-family: 'Inter', sans-serif;
  color: var(--c-text);
}

/* ‚ïê‚ïê –®–ê–ü–ö–ê –ö–ê–¢–ê–õ–û–ì–£ ‚ïê‚ïê */
.cat-hero {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  margin-bottom: 24px;
  flex-wrap: wrap;
}
.cat-hero__title {
  font-size: clamp(22px, 4vw, 32px);
  font-weight: 800;
  margin: 0;
  background: linear-gradient(90deg, #fff 0%, var(--c-accent) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.cat-hero__sub {
  font-size: 13px;
  color: var(--c-muted);
  margin: 4px 0 0;
}
.cat-count {
  background: var(--c-surface);
  border: 1px solid var(--c-border);
  border-radius: 20px;
  padding: 6px 16px;
  font-size: 13px;
  color: var(--c-muted);
  white-space: nowrap;
}
.cat-count span { color: var(--c-accent); font-weight: 700; }

/* ‚ïê‚ïê –ü–ê–ù–ï–õ–¨ –ü–û–®–£–ö–£ + –§–Ü–õ–¨–¢–†–ò ‚ïê‚ïê */
.cat-toolbar {
  background: var(--c-surface);
  border: 1px solid var(--c-border);
  border-radius: var(--radius);
  padding: 16px;
  margin-bottom: 20px;
}
.cat-search-row {
  display: flex;
  gap: 10px;
  margin-bottom: 14px;
  flex-wrap: wrap;
}
.cat-search {
  flex: 1;
  min-width: 180px;
  background: var(--c-card);
  border: 1px solid var(--c-border);
  border-radius: var(--radius-sm);
  color: var(--c-text);
  font-size: 14px;
  padding: 10px 14px 10px 38px;
  outline: none;
  transition: border-color .2s;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%238b949e' viewBox='0 0 16 16'%3E%3Cpath d='M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.099zm-5.442 1.656a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: 12px center;
}
.cat-search:focus { border-color: var(--c-accent); }
.cat-search::placeholder { color: var(--c-muted); }

.btn-toggle-filters {
  background: var(--c-card);
  border: 1px solid var(--c-border);
  border-radius: var(--radius-sm);
  color: var(--c-muted);
  font-size: 13px;
  padding: 10px 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 7px;
  transition: all .2s;
  white-space: nowrap;
}
.btn-toggle-filters:hover { border-color: var(--c-accent); color: var(--c-text); }
.btn-toggle-filters.active { border-color: var(--c-accent); color: var(--c-accent); }
.btn-toggle-filters .tf-icon { transition: transform .25s; }
.btn-toggle-filters.active .tf-icon { transform: rotate(180deg); }

/* –§—ñ–ª—å—Ç—Ä–∏ */
.cat-filters {
  display: none;
  grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
  gap: 12px;
  padding-top: 14px;
  border-top: 1px solid var(--c-border);
  margin-top: 2px;
}
.cat-filters.show { display: grid; }

.flt-group { display: flex; flex-direction: column; gap: 5px; }
.flt-label {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .6px;
  color: var(--c-accent);
}
.flt-select, .flt-input {
  background: var(--c-card);
  border: 1px solid var(--c-border);
  border-radius: var(--radius-sm);
  color: var(--c-text);
  font-size: 13px;
  padding: 8px 10px;
  outline: none;
  width: 100%;
  transition: border-color .2s;
}
.flt-select:focus, .flt-input:focus { border-color: var(--c-accent); }
.flt-select option { background: var(--c-card); }

.flt-price-row { display: flex; gap: 6px; }
.flt-price-row .flt-input { min-width: 0; }

.flt-range-wrap { display: flex; flex-direction: column; gap: 4px; }
.flt-range {
  -webkit-appearance: none;
  width: 100%;
  height: 4px;
  border-radius: 2px;
  background: var(--c-card);
  outline: none;
  cursor: pointer;
}
.flt-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px; height: 16px;
  border-radius: 50%;
  background: var(--c-accent);
  cursor: pointer;
  box-shadow: 0 0 0 2px rgba(88,166,255,.25);
}
.flt-range-val {
  display: flex;
  justify-content: flex-end;
  font-size: 11px;
  color: var(--c-accent);
  font-weight: 700;
}

.flt-chips { display: flex; gap: 6px; flex-wrap: wrap; margin-top: 2px; }
.flt-chip {
  padding: 4px 10px;
  border-radius: 20px;
  border: 1px solid var(--c-border);
  background: var(--c-card);
  color: var(--c-muted);
  font-size: 12px;
  cursor: pointer;
  transition: all .18s;
}
.flt-chip:hover { border-color: var(--c-accent); color: var(--c-text); }
.flt-chip.active { background: rgba(88,166,255,.15); border-color: var(--c-accent); color: var(--c-accent); font-weight: 600; }

.btn-reset {
  background: transparent;
  border: 1px solid var(--c-border);
  border-radius: var(--radius-sm);
  color: var(--c-muted);
  font-size: 12px;
  padding: 8px 14px;
  cursor: pointer;
  transition: all .2s;
  align-self: flex-end;
}
.btn-reset:hover { border-color: var(--c-red); color: var(--c-red); }

/* ‚ïê‚ïê –°–û–†–¢–£–í–ê–ù–ù–Ø ‚ïê‚ïê */
.cat-sort-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 14px;
  flex-wrap: wrap;
}
.sort-label { font-size: 12px; color: var(--c-muted); }
.sort-btn {
  background: var(--c-surface);
  border: 1px solid var(--c-border);
  border-radius: 20px;
  color: var(--c-muted);
  font-size: 12px;
  padding: 5px 12px;
  cursor: pointer;
  transition: all .18s;
  display: flex;
  align-items: center;
  gap: 4px;
}
.sort-btn:hover { border-color: var(--c-accent); color: var(--c-text); }
.sort-btn.active { background: rgba(88,166,255,.12); border-color: var(--c-accent); color: var(--c-accent); font-weight: 600; }
.sort-dir { font-size: 10px; }

/* ‚ïê‚ïê VIEW TOGGLE ‚ïê‚ïê */
.view-toggle {
  display: flex;
  gap: 4px;
  margin-left: auto;
}
.view-btn {
  background: var(--c-surface);
  border: 1px solid var(--c-border);
  border-radius: var(--radius-sm);
  color: var(--c-muted);
  width: 32px;
  height: 32px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  transition: all .18s;
}
.view-btn:hover { border-color: var(--c-accent); color: var(--c-text); }
.view-btn.active { background: rgba(88,166,255,.12); border-color: var(--c-accent); color: var(--c-accent); }

/* ‚ïê‚ïê –°–ü–ò–°–û–ö (list view) ‚ïê‚ïê */
#catalogList.list-view .game-card-list { display: flex; }
#catalogList.grid-view .game-card-list { display: none; }
#catalogList.list-view .game-card-grid { display: none; }
#catalogList.grid-view .game-card-grid { display: block; }

/* LIST CARD */
.game-card-list {
  background: var(--c-surface);
  border: 1px solid var(--c-border);
  border-radius: var(--radius);
  margin-bottom: 8px;
  cursor: pointer;
  transition: all .2s;
  overflow: hidden;
  align-items: stretch;
}
.game-card-list:hover {
  border-color: rgba(88,166,255,.35);
  background: var(--c-card);
  box-shadow: 0 4px 20px rgba(0,0,0,.4);
  transform: translateX(3px);
}
.gcl-img {
  width: 148px;
  min-height: 84px;
  object-fit: cover;
  flex-shrink: 0;
  border-radius: var(--radius) 0 0 var(--radius);
}
.gcl-body {
  flex: 1;
  padding: 12px 16px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 6px;
  min-width: 0;
}
.gcl-title {
  font-size: 15px;
  font-weight: 700;
  color: var(--c-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.gcl-meta {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  align-items: center;
}
.gcl-genre {
  font-size: 11px;
  color: var(--c-muted);
}
.gcl-year {
  font-size: 11px;
  color: var(--c-muted);
  background: rgba(255,255,255,.05);
  padding: 2px 7px;
  border-radius: 10px;
}
.gcl-right {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  justify-content: center;
  gap: 6px;
  padding: 12px 16px 12px 0;
  flex-shrink: 0;
}

/* GRID CARD */
#catalogList.grid-view { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 14px; }
.game-card-grid {
  background: var(--c-surface);
  border: 1px solid var(--c-border);
  border-radius: var(--radius);
  cursor: pointer;
  transition: all .22s;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}
.game-card-grid:hover {
  border-color: rgba(88,166,255,.4);
  transform: translateY(-4px);
  box-shadow: 0 12px 32px rgba(0,0,0,.5);
}
.gcg-img {
  width: 100%;
  aspect-ratio: 16/9;
  object-fit: cover;
}
.gcg-body {
  padding: 10px 12px 12px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  flex: 1;
}
.gcg-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--c-text);
  line-height: 1.3;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.gcg-bottom {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: auto;
}
.gcg-genre {
  font-size: 10px;
  color: var(--c-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 60%;
}

/* –°–ø—ñ–ª—å–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –∫–∞—Ä—Ç–æ–∫ */
.badge-ea {
  font-size: 10px; font-weight: 700;
  padding: 2px 6px; border-radius: 3px;
  background: rgba(0,87,183,.5); color: #67c1f5;
  border: 1px solid rgba(0,87,183,.7);
  white-space: nowrap;
}
.badge-ua {
  font-size: 10px; font-weight: 700;
  padding: 2px 6px; border-radius: 3px;
  background: linear-gradient(90deg, #0057b7 50%, #ffd700 50%);
  color: #fff; white-space: nowrap;
}

.rating-dot {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  font-size: 12px;
  font-weight: 700;
}
.rating-dot::before {
  content: '';
  width: 8px; height: 8px;
  border-radius: 50%;
  display: block;
}
.rating-dot.green { color: #3fb950; }
.rating-dot.green::before { background: #3fb950; }
.rating-dot.yellow { color: #d29922; }
.rating-dot.yellow::before { background: #d29922; }
.rating-dot.red { color: #f85149; }
.rating-dot.red::before { background: #f85149; }
.rating-dot.none { color: var(--c-muted); }
.rating-dot.none::before { background: var(--c-muted); }

/* –¶—ñ–Ω–∞ */
.price-block { display: flex; align-items: baseline; gap: 6px; flex-wrap: wrap; }
.price-main { font-size: 15px; font-weight: 800; color: var(--c-text); }
.price-old { font-size: 11px; color: var(--c-muted); text-decoration: line-through; }
.price-disc {
  font-size: 11px; font-weight: 800;
  padding: 1px 5px; border-radius: 3px;
  background: #4c6b22; color: #beee11;
}
.price-free { font-size: 13px; font-weight: 700; color: var(--c-green); }
.price-soon { font-size: 12px; font-weight: 600; color: var(--c-muted); font-style: italic; }
.price-demo { font-size: 12px; font-weight: 700; color: #a371f7; }

/* –ü–æ—Ä–æ–∂–Ω—ñ–π —Å—Ç–∞–Ω */
.cat-empty {
  text-align: center;
  padding: 60px 20px;
  color: var(--c-muted);
  font-size: 15px;
}
.cat-empty-icon { font-size: 48px; margin-bottom: 12px; }

/* –õ–æ–∞–¥–µ—Ä */
.cat-loader {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 60px 20px;
  color: var(--c-muted);
}
.spinner {
  width: 24px; height: 24px;
  border: 3px solid rgba(88,166,255,.2);
  border-top-color: var(--c-accent);
  border-radius: 50%;
  animation: spin .7s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MODAL ‚Äî –ö–ê–†–¢–û–ß–ö–ê –ì–†–ò
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
#gameModal {
  display: none;
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: rgba(0,0,0,.85);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  overflow-y: auto;
  overscroll-behavior: contain;
  padding: 16px;
}
#gameModal.open { display: flex; align-items: flex-start; justify-content: center; }

.gm-card {
  background: var(--c-surface);
  width: 100%;
  max-width: 900px;
  border-radius: 14px;
  border: 1px solid var(--c-border);
  box-shadow: 0 24px 64px rgba(0,0,0,.8);
  position: relative;
  overflow: hidden;
  margin: auto;
  animation: modalIn .25s cubic-bezier(.22,1,.36,1);
}
@keyframes modalIn {
  from { opacity: 0; transform: translateY(20px) scale(.97); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

.gm-close {
  position: absolute;
  top: 12px; right: 12px;
  z-index: 20;
  background: rgba(0,0,0,.6);
  border: 1px solid rgba(255,255,255,.12);
  color: #ccc;
  width: 34px; height: 34px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all .2s;
  backdrop-filter: blur(8px);
}
.gm-close:hover { background: rgba(255,255,255,.2); color: #fff; }

/* Header –∑ –±–∞–Ω–µ—Ä–æ–º */
.gm-banner {
  position: relative;
  width: 100%;
  height: 180px;
  overflow: hidden;
  background: #0a0f18;
}
.gm-banner__blur {
  position: absolute;
  inset: -20px;
  background-size: cover;
  background-position: center;
  filter: blur(20px) brightness(.3) saturate(1.3);
  transform: scale(1.1);
}
.gm-banner__fade {
  position: absolute;
  inset: 0;
  background: linear-gradient(to bottom, transparent 30%, var(--c-surface) 100%);
}

/* –®–∞–ø–∫–∞ –∫–∞—Ä—Ç–∫–∏ */
.gm-header {
  display: flex;
  gap: 16px;
  padding: 0 20px 16px;
  margin-top: -60px;
  position: relative;
  z-index: 2;
  align-items: flex-end;
}
.gm-cover {
  width: 120px;
  height: 56px;
  border-radius: 6px;
  object-fit: cover;
  border: 2px solid rgba(255,255,255,.12);
  box-shadow: 0 4px 16px rgba(0,0,0,.6);
  flex-shrink: 0;
}
.gm-header-info { flex: 1; min-width: 0; }
.gm-title {
  font-size: clamp(17px, 3.5vw, 24px);
  font-weight: 800;
  color: #fff;
  margin: 0 0 8px;
  line-height: 1.2;
  word-break: break-word;
}
.gm-badges { display: flex; flex-wrap: wrap; gap: 5px; }
.gm-badge {
  font-size: 10px;
  font-weight: 700;
  padding: 3px 8px;
  border-radius: 4px;
  text-transform: uppercase;
  letter-spacing: .4px;
}
.gm-badge-ea     { background: rgba(0,87,183,.4); color: #67c1f5; border: 1px solid rgba(0,87,183,.6); }
.gm-badge-free   { background: rgba(63,185,80,.2); color: #3fb950; border: 1px solid rgba(63,185,80,.4); }
.gm-badge-demo   { background: rgba(163,113,247,.2); color: #a371f7; border: 1px solid rgba(163,113,247,.4); }
.gm-badge-coming { background: rgba(210,153,34,.2); color: #d29922; border: 1px solid rgba(210,153,34,.4); }

/* –¢—ñ–ª–æ –º–æ–¥–∞–ª–∫–∏ */
.gm-body {
  display: grid;
  grid-template-columns: 1fr 260px;
  gap: 20px;
  padding: 0 20px 24px;
}

/* –ì–∞–ª–µ—Ä–µ—è */
.gm-gallery {}
.gm-mainview {
  position: relative;
  width: 100%;
  aspect-ratio: 16/9;
  background: #000;
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.06);
}
.gm-mainview img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}
.gm-nav {
  position: absolute;
  top: 50%; transform: translateY(-50%);
  background: rgba(0,0,0,.65);
  border: none;
  color: #aaa;
  width: 34px; height: 56px;
  cursor: pointer;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all .18s;
  z-index: 5;
}
.gm-nav:hover { background: rgba(88,166,255,.35); color: #fff; }
.gm-nav-l { left: 0; border-radius: 0 6px 6px 0; }
.gm-nav-r { right: 0; border-radius: 6px 0 0 6px; }

.gm-thumbs {
  display: flex;
  gap: 5px;
  margin-top: 8px;
  overflow-x: auto;
  padding-bottom: 3px;
  scrollbar-width: thin;
  scrollbar-color: #3d6c8d transparent;
}
.gm-thumb {
  width: 84px; height: 47px;
  object-fit: cover;
  flex-shrink: 0;
  border-radius: 4px;
  cursor: pointer;
  opacity: .5;
  border: 2px solid transparent;
  transition: all .16s;
}
.gm-thumb:hover { opacity: .85; }
.gm-thumb.active { opacity: 1; border-color: var(--c-accent); }

.gm-desc {
  margin-top: 14px;
  font-size: 13px;
  line-height: 1.65;
  color: #8b949e;
}

/* –ë–æ–∫–æ–≤–∞ –ø–∞–Ω–µ–ª—å */
.gm-side { display: flex; flex-direction: column; gap: 12px; }

.gm-meta-box {
  background: rgba(255,255,255,.03);
  border: 1px solid var(--c-border);
  border-radius: 8px;
  overflow: hidden;
}
.gm-meta-row {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 8px 12px;
  font-size: 12px;
  border-bottom: 1px solid var(--c-border);
  gap: 8px;
}
.gm-meta-row:last-child { border-bottom: none; }
.gm-meta-key { color: var(--c-accent); font-weight: 600; flex-shrink: 0; }
.gm-meta-val { color: var(--c-text); text-align: right; word-break: break-word; max-width: 65%; }

.gm-rating-bar {
  height: 3px;
  background: rgba(255,255,255,.06);
  border-radius: 2px;
  margin: 0 12px 8px;
  overflow: hidden;
}
.gm-rating-fill { height: 100%; border-radius: 2px; }

/* –¶—ñ–Ω–∞ –≤ –º–æ–¥–∞–ª—Ü—ñ */
.gm-price-box {
  background: linear-gradient(135deg, rgba(88,166,255,.06), rgba(0,0,0,.3));
  border: 1px solid var(--c-border);
  border-radius: 8px;
  padding: 14px;
}
.gm-price-main {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 4px;
}
.gm-price-big { font-size: 28px; font-weight: 800; color: #fff; line-height: 1; }
.gm-price-old-big { font-size: 14px; color: var(--c-muted); text-decoration: line-through; }
.gm-price-disc-big {
  font-size: 14px; font-weight: 800;
  padding: 3px 8px; border-radius: 4px;
  background: #4c6b22; color: #beee11;
}
.gm-price-label { font-size: 22px; font-weight: 800; }
.gm-hist-info {
  font-size: 11px;
  color: var(--c-muted);
  border-top: 1px solid rgba(255,255,255,.06);
  padding-top: 10px;
  margin-top: 8px;
  line-height: 2;
}
.gm-hist-val { color: var(--c-gold); font-weight: 700; }
.gm-hist-val2 { color: var(--c-text); font-weight: 600; }
.gm-steam-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-top: 10px;
  background: linear-gradient(90deg, #1680c8, #0f3d9e);
  color: #fff;
  text-decoration: none;
  padding: 12px;
  border-radius: 7px;
  font-weight: 700;
  font-size: 13px;
  transition: all .2s;
  border: 1px solid rgba(255,255,255,.08);
}
.gm-steam-btn:hover {
  background: linear-gradient(90deg, #2090d8, #1a4dae);
  box-shadow: 0 4px 18px rgba(22,128,200,.4);
  transform: translateY(-1px);
}

/* –°–∏—Å—Ç–µ–º–Ω—ñ –≤–∏–º–æ–≥–∏ */
.gm-sysreq {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
.gm-sysreq-col {
  background: rgba(0,0,0,.25);
  border: 1px solid var(--c-border);
  border-radius: 8px;
  padding: 14px;
}
.gm-sysreq-title {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .6px;
  color: var(--c-muted);
  margin-bottom: 8px;
  padding-bottom: 6px;
  border-bottom: 1px solid var(--c-border);
}
.gm-sysreq-text {
  font-size: 12px;
  color: #8b949e;
  line-height: 1.7;
}

/* ‚ïê‚ïê –ú–û–ë–Ü–õ–¨–ù–ê –ê–î–ê–ü–¢–ê–¶–Ü–Ø ‚ïê‚ïê */
@media (max-width: 700px) {
  .cat-wrap { padding: 16px 12px 40px; }
  .cat-hero { flex-direction: column; align-items: flex-start; }

  /* List cards –Ω–∞ –º–æ–±—ñ–ª—ñ */
  .game-card-list { flex-direction: column; }
  .gcl-img { width: 100%; min-height: 120px; border-radius: var(--radius) var(--radius) 0 0; max-height: 160px; }
  .gcl-right { flex-direction: row; align-items: center; justify-content: space-between; padding: 0 12px 12px; }
  .gcl-body { padding: 10px 12px 6px; }

  /* Grid ‚Äî 2 –∫–æ–ª–æ–Ω–∫–∏ –Ω–∞ –º–æ–±—ñ–ª—ñ */
  #catalogList.grid-view { grid-template-columns: repeat(2, 1fr); gap: 10px; }

  /* Modal */
  #gameModal { padding: 10px 8px; }
  .gm-banner { height: 110px; }
  .gm-header { margin-top: -36px; padding: 0 14px 12px; gap: 12px; }
  .gm-cover { width: 96px; height: 44px; }
  .gm-title { font-size: 16px; }
  .gm-body { grid-template-columns: 1fr; padding: 0 14px 20px; gap: 14px; }
  .gm-sysreq { grid-template-columns: 1fr; }
  .gm-price-big { font-size: 22px; }
}

@media (max-width: 400px) {
  #catalogList.grid-view { grid-template-columns: 1fr; }
  .gm-cover { width: 80px; height: 37px; }
}
</style>

<div class="cat-wrap">

  <!-- –®–∞–ø–∫–∞ -->
  <div class="cat-hero">
    <div>
      <h1 class="cat-hero__title">üá∫üá¶ –ö–∞—Ç–∞–ª–æ–≥ —ñ–≥–æ—Ä</h1>
      <p class="cat-hero__sub">–£–∫—Ä–∞—ó–Ω—Å—å–∫—ñ –≤—ñ–¥–µ–æ—ñ–≥—Ä–∏ —É Steam ‚Äî —Ü—ñ–Ω–∏, —Ä–µ–π—Ç–∏–Ω–≥–∏, —Ñ—ñ–ª—å—Ç—Ä–∏</p>
    </div>
    <div class="cat-count">–ó–Ω–∞–π–¥–µ–Ω–æ: <span id="resultCount">0</span> —ñ–≥–æ—Ä</div>
  </div>

  <!-- Toolbar -->
  <div class="cat-toolbar">
    <div class="cat-search-row">
      <input type="text" id="searchInput" class="cat-search" placeholder="–ü–æ—à—É–∫ –∑–∞ –Ω–∞–∑–≤–æ—é...">
      <button class="btn-toggle-filters" id="btnFilters" onclick="toggleFilters()">
        <span>–§—ñ–ª—å—Ç—Ä–∏</span>
        <span class="tf-icon">‚ñæ</span>
      </button>
    </div>

    <div class="cat-filters" id="filterPanel">
      <!-- –ñ–∞–Ω—Ä -->
      <div class="flt-group">
        <span class="flt-label">–ñ–∞–Ω—Ä</span>
        <select id="fltGenre" class="flt-select">
          <option value="">–í—Å—ñ –∂–∞–Ω—Ä–∏</option>
        </select>
      </div>
      <!-- –†—ñ–∫ -->
      <div class="flt-group">
        <span class="flt-label">–†—ñ–∫</span>
        <div style="display:flex;gap:5px;">
          <select id="fltYearFrom" class="flt-select" style="flex:1;padding:8px 5px;"><option value="">–í—ñ–¥</option></select>
          <select id="fltYearTo" class="flt-select" style="flex:1;padding:8px 5px;"><option value="">–î–æ</option></select>
        </div>
      </div>
      <!-- –¶—ñ–Ω–∞ -->
      <div class="flt-group">
        <span class="flt-label">–¶—ñ–Ω–∞ (‚Ç¥)</span>
        <div class="flt-price-row">
          <input type="number" id="fltPriceMin" class="flt-input" placeholder="–í—ñ–¥" min="0">
          <input type="number" id="fltPriceMax" class="flt-input" placeholder="–î–æ" min="0">
        </div>
      </div>
      <!-- –†–µ–π—Ç–∏–Ω–≥ -->
      <div class="flt-group">
        <span class="flt-label">–†–µ–π—Ç–∏–Ω–≥ –º—ñ–Ω.</span>
        <div class="flt-range-wrap">
          <input type="range" id="fltRating" class="flt-range" min="0" max="100" value="0">
          <div class="flt-range-val"><span id="fltRatingVal">–ë—É–¥—å-—è–∫–∏–π</span></div>
        </div>
      </div>
      <!-- –ó–Ω–∏–∂–∫–∞ -->
      <div class="flt-group">
        <span class="flt-label">–ó–Ω–∏–∂–∫–∞ –º—ñ–Ω.</span>
        <div class="flt-range-wrap">
          <input type="range" id="fltDiscount" class="flt-range" min="0" max="90" value="0">
          <div class="flt-range-val"><span id="fltDiscountVal">–ë—É–¥—å-—è–∫–∞</span></div>
        </div>
      </div>
      <!-- –¢–µ–≥–∏ -->
      <div class="flt-group" style="grid-column: 1/-1;">
        <span class="flt-label">–¢–µ–≥–∏</span>
        <select id="fltTag" class="flt-select" style="max-width:260px;">
          <option value="">–í—Å—ñ —Ç–µ–≥–∏</option>
        </select>
      </div>
      <!-- –°—Ç–∞—Ç—É—Å -->
      <div class="flt-group" style="grid-column: 1/-1;">
        <span class="flt-label">–°—Ç–∞—Ç—É—Å</span>
        <div class="flt-chips" id="statusChips">
          <button class="flt-chip active" data-status="">–í—Å—ñ</button>
          <button class="flt-chip" data-status="released">–í–∏–π—à–ª–∏</button>
          <button class="flt-chip" data-status="ea">Early Access</button>
          <button class="flt-chip" data-status="free">–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω—ñ</button>
          <button class="flt-chip" data-status="demo">Demo</button>
          <button class="flt-chip" data-status="upcoming">–ù–µ–∑–∞–±–∞—Ä–æ–º</button>
          <button class="flt-chip" data-status="histlow">–Ü—Å—Ç. –º—ñ–Ω—ñ–º—É–º üî•</button>
        </div>
      </div>
      <!-- Reset -->
      <div class="flt-group" style="justify-content:flex-end;">
        <button class="btn-reset" onclick="resetFilters()">‚úï –°–∫–∏–Ω—É—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</button>
      </div>
    </div>
  </div>

  <!-- –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è + –≤–∏–¥ -->
  <div class="cat-sort-row">
    <span class="sort-label">–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è:</span>
    <button class="sort-btn active" data-sort="title">–ù–∞–∑–≤–∞ <span class="sort-dir" id="dir-title">‚Üë</span></button>
    <button class="sort-btn" data-sort="rating">–†–µ–π—Ç–∏–Ω–≥ <span class="sort-dir" id="dir-rating"></span></button>
    <button class="sort-btn" data-sort="price">–¶—ñ–Ω–∞ <span class="sort-dir" id="dir-price"></span></button>
    <button class="sort-btn" data-sort="year">–†—ñ–∫ <span class="sort-dir" id="dir-year"></span></button>
    <button class="sort-btn" data-sort="discount">–ó–Ω–∏–∂–∫–∞ <span class="sort-dir" id="dir-discount"></span></button>
    <div class="view-toggle">
      <button class="view-btn active" id="btnList" onclick="setView('list')" title="–°–ø–∏—Å–æ–∫">‚ò∞</button>
      <button class="view-btn" id="btnGrid" onclick="setView('grid')" title="–°—ñ—Ç–∫–∞">‚äû</button>
    </div>
  </div>

  <!-- –°–ø–∏—Å–æ–∫ —ñ–≥–æ—Ä -->
  <div id="catalogList" class="list-view">
    <div class="cat-loader"><div class="spinner"></div> –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–∞—Ç–∞–ª–æ–≥—É...</div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê –ú–û–î–ê–õ–¨–ù–ï –í–Ü–ö–ù–û ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="gameModal" onclick="handleOverlay(event)">
  <div class="gm-card">
    <button class="gm-close" onclick="closeModal()">‚úï</button>

    <div class="gm-banner">
      <div class="gm-banner__blur" id="gmBg"></div>
      <div class="gm-banner__fade"></div>
    </div>

    <div class="gm-header">
      <img class="gm-cover" id="gmCover" src="" alt="">
      <div class="gm-header-info">
        <h2 class="gm-title" id="gmTitle"></h2>
        <div class="gm-badges" id="gmBadges"></div>
      </div>
    </div>

    <div class="gm-body">
      <!-- –ì–∞–ª–µ—Ä–µ—è + –æ–ø–∏—Å -->
      <div>
        <div class="gm-mainview">
          <button class="gm-nav gm-nav-l" onclick="changeSlide(-1)">&#10094;</button>
          <img id="gmMain" src="" alt="–°–∫—Ä—ñ–Ω—à–æ—Ç">
          <button class="gm-nav gm-nav-r" onclick="changeSlide(1)">&#10095;</button>
        </div>
        <div class="gm-thumbs" id="gmThumbs"></div>
        <div class="gm-desc" id="gmDesc"></div>
      </div>

      <!-- –ú–µ—Ç–∞ + —Ü—ñ–Ω–∞ -->
      <div class="gm-side">
        <div class="gm-meta-box" id="gmMeta"></div>
        <div class="gm-price-box" id="gmPrice"></div>
      </div>

      <!-- –°–∏—Å—Ç–µ–º–Ω—ñ –≤–∏–º–æ–≥–∏ -->
      <div class="gm-sysreq" id="gmSys" style="display:none"></div>
    </div>
  </div>
</div>

<script>
const FB_URL = "https://dovbushhub-default-rtdb.europe-west1.firebasedatabase.app/games.json";

let games = {};
let currentView = 'list';
let currentSort = 'title';
let sortDir = 1;
let activeStatus = '';
let screens = [];
let screenIdx = 0;

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê INIT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
async function init() {
  try {
    const r = await fetch(FB_URL);
    games = await r.json();
    buildDropdowns();
    render();
  } catch(e) {
    document.getElementById('catalogList').innerHTML =
      '<div class="cat-empty"><div class="cat-empty-icon">‚ö†Ô∏è</div>–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö.</div>';
  }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DROPDOWN BUILDERS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function buildDropdowns() {
  const genres = new Set(), tags = new Set(), years = new Set();
  Object.values(games).forEach(g => {
    if (g.genre) g.genre.split(',').forEach(v => genres.add(v.trim()));
    if (g.tags)  g.tags.split(',').forEach(t => tags.add(t.trim()));
    const y = yearNum(g.releaseDate);
    if (y) years.add(y);
  });

  fillSelect('fltGenre', [...genres].sort());
  fillSelect('fltTag', [...tags].sort());
  const sortedYears = [...years].sort((a,b) => b - a);
  fillSelect('fltYearFrom', sortedYears);
  fillSelect('fltYearTo', sortedYears);
}

function fillSelect(id, arr) {
  const el = document.getElementById(id);
  arr.forEach(v => el.add(new Option(v, v)));
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FILTERS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function toggleFilters() {
  const panel = document.getElementById('filterPanel');
  const btn   = document.getElementById('btnFilters');
  const open  = panel.classList.toggle('show');
  btn.classList.toggle('active', open);
}

function resetFilters() {
  document.getElementById('searchInput').value = '';
  document.getElementById('fltGenre').value = '';
  document.getElementById('fltTag').value = '';
  document.getElementById('fltYearFrom').value = '';
  document.getElementById('fltYearTo').value = '';
  document.getElementById('fltPriceMin').value = '';
  document.getElementById('fltPriceMax').value = '';
  document.getElementById('fltRating').value = 0;
  document.getElementById('fltDiscount').value = 0;
  document.getElementById('fltRatingVal').textContent = '–ë—É–¥—å-—è–∫–∏–π';
  document.getElementById('fltDiscountVal').textContent = '–ë—É–¥—å-—è–∫–∞';
  setStatusChip('');
  render();
}

/* Status chips */
document.getElementById('statusChips').addEventListener('click', e => {
  const chip = e.target.closest('.flt-chip');
  if (!chip) return;
  setStatusChip(chip.dataset.status);
  render();
});

function setStatusChip(val) {
  activeStatus = val;
  document.querySelectorAll('.flt-chip').forEach(c =>
    c.classList.toggle('active', c.dataset.status === val));
}

/* Range labels */
document.getElementById('fltRating').addEventListener('input', function() {
  document.getElementById('fltRatingVal').textContent =
    this.value > 0 ? this.value + '%' : '–ë—É–¥—å-—è–∫–∏–π';
  render();
});
document.getElementById('fltDiscount').addEventListener('input', function() {
  document.getElementById('fltDiscountVal').textContent =
    this.value > 0 ? this.value + '%' : '–ë—É–¥—å-—è–∫–∞';
  render();
});

/* –†–µ—à—Ç–∞ input'—ñ–≤ */
['searchInput','fltGenre','fltTag','fltYearFrom','fltYearTo','fltPriceMin','fltPriceMax'].forEach(id =>
  document.getElementById(id).addEventListener('input', render)
);

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SORT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
document.querySelectorAll('.sort-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const field = btn.dataset.sort;
    if (currentSort === field) sortDir *= -1;
    else { currentSort = field; sortDir = 1; }
    document.querySelectorAll('.sort-btn').forEach(b => {
      b.classList.toggle('active', b.dataset.sort === field);
      document.getElementById('dir-' + b.dataset.sort).textContent = '';
    });
    document.getElementById('dir-' + field).textContent = sortDir === 1 ? '‚Üë' : '‚Üì';
    render();
  });
});

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê VIEW ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function setView(v) {
  currentView = v;
  const list = document.getElementById('catalogList');
  list.className = v === 'list' ? 'list-view' : 'grid-view';
  document.getElementById('btnList').classList.toggle('active', v === 'list');
  document.getElementById('btnGrid').classList.toggle('active', v === 'grid');
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HELPERS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function yearNum(d) { const y = new Date(d).getFullYear(); return isNaN(y) ? 0 : y; }
function fmtDate(d) { return (!d || d === '-') ? 'TBA' : new Date(d).toLocaleDateString('uk-UA'); }
function cleanTitle(t) { return (t || '').replace(/UA_DEV|UA/g, '').trim(); }

function ratingClass(r) {
  if (!r) return 'none';
  if (r >= 80) return 'green';
  if (r >= 60) return 'yellow';
  return 'red';
}
function ratingLabel(r) {
  if (!r) return '‚Äî';
  if (r >= 80) return '–î—É–∂–µ –ø–æ–∑–∏—Ç–∏–≤–Ω—ñ';
  if (r >= 60) return '–ó–º—ñ—à–∞–Ω—ñ';
  return '–ü–µ—Ä–µ–≤–∞–∂–Ω–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ñ';
}
function ratingColor(r) {
  if (!r) return '#8b949e';
  if (r >= 80) return '#3fb950';
  if (r >= 60) return '#d29922';
  return '#f85149';
}

function stageOf(g) {
  const s = (g.stage || '').toLowerCase();
  if (s.includes('upcoming')) return 'upcoming';
  if (s.includes('demo'))     return 'demo';
  if (s.includes('free') || g.currentPrice === 0) return 'free';
  if (s.includes('early access')) return 'ea';
  return 'released';
}

function priceBlock(g) {
  const stage = stageOf(g);
  if (stage === 'upcoming') return `<span class="price-soon">–ù–µ–∑–∞–±–∞—Ä–æ–º</span>`;
  if (stage === 'demo')     return `<span class="price-demo">Demo</span>`;
  if (stage === 'free')     return `<span class="price-free">–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ</span>`;
  if (!g.currentPrice)      return `<span class="price-free">–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ</span>`;
  if (g.discount > 0) return `
    <div class="price-block">
      <span class="price-disc">-${g.discount}%</span>
      <span class="price-old">${g.basePrice} ‚Ç¥</span>
      <span class="price-main">${g.currentPrice} ‚Ç¥</span>
    </div>`;
  return `<span class="price-main">${g.currentPrice} ‚Ç¥</span>`;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê RENDER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function render() {
  const q       = document.getElementById('searchInput').value.toLowerCase().trim();
  const genre   = document.getElementById('fltGenre').value;
  const tag     = document.getElementById('fltTag').value;
  const yFrom   = +document.getElementById('fltYearFrom').value || 0;
  const yTo     = +document.getElementById('fltYearTo').value   || 9999;
  const pMin    = +document.getElementById('fltPriceMin').value || 0;
  const pMax    = +document.getElementById('fltPriceMax').value || 999999;
  const minRat  = +document.getElementById('fltRating').value;
  const minDisc = +document.getElementById('fltDiscount').value;

  let list = Object.values(games).filter(g => {
    if (!g.title) return false;
    const stage = stageOf(g);
    const yr = yearNum(g.releaseDate);

    /* —Å—Ç–∞—Ç—É—Å-—Ñ—ñ–ª—å—Ç—Ä */
    if (activeStatus === 'released' && stage !== 'released') return false;
    if (activeStatus === 'ea'       && stage !== 'ea')       return false;
    if (activeStatus === 'free'     && stage !== 'free')     return false;
    if (activeStatus === 'demo'     && stage !== 'demo')     return false;
    if (activeStatus === 'upcoming' && stage !== 'upcoming') return false;
    if (activeStatus === 'histlow') {
      if (!g.histLow || g.currentPrice > g.histLow) return false;
    }

    /* –ø–æ—à—É–∫ */
    if (q && !cleanTitle(g.title).toLowerCase().includes(q)) return false;

    /* –∂–∞–Ω—Ä */
    if (genre && !(g.genre || '').split(',').map(s => s.trim()).includes(genre)) return false;

    /* —Ç–µ–≥ */
    if (tag && !(g.tags || '').includes(tag)) return false;

    /* —Ä—ñ–∫ */
    if (yr && yFrom && yr < yFrom) return false;
    if (yr && yTo  && yr > yTo)   return false;

    /* —Ü—ñ–Ω–∞ (—ñ–≥–Ω–æ—Ä—É—î–º–æ –¥–ª—è –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏—Ö/upcoming/demo) */
    if (!['upcoming','demo','free'].includes(stage)) {
      const price = g.currentPrice || 0;
      if (price < pMin || price > pMax) return false;
    }

    /* —Ä–µ–π—Ç–∏–Ω–≥ */
    if (minRat > 0 && (g.rating || 0) < minRat) return false;

    /* –∑–Ω–∏–∂–∫–∞ */
    if (minDisc > 0 && (g.discount || 0) < minDisc) return false;

    return true;
  });

  /* –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è */
  list.sort((a, b) => {
    let va, vb;
    switch (currentSort) {
      case 'rating':   va = a.rating   || 0; vb = b.rating   || 0; break;
      case 'price':    va = a.currentPrice || 0; vb = b.currentPrice || 0; break;
      case 'year':     va = yearNum(a.releaseDate); vb = yearNum(b.releaseDate); break;
      case 'discount': va = a.discount || 0; vb = b.discount || 0; break;
      default:         va = cleanTitle(a.title).toLowerCase(); vb = cleanTitle(b.title).toLowerCase();
    }
    return va < vb ? -sortDir : va > vb ? sortDir : 0;
  });

  document.getElementById('resultCount').textContent = list.length;

  if (!list.length) {
    document.getElementById('catalogList').innerHTML =
      `<div class="cat-empty"><div class="cat-empty-icon">üîç</div>–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –°–ø—Ä–æ–±—É–π—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏.</div>`;
    return;
  }

  const cl = document.getElementById('catalogList');
  cl.className = currentView === 'list' ? 'list-view' : 'grid-view';

  if (currentView === 'list') {
    cl.innerHTML = list.map(g => buildListCard(g)).join('');
  } else {
    cl.innerHTML = list.map(g => buildGridCard(g)).join('');
  }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê –ö–ê–†–¢–ö–ò ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function buildListCard(g) {
  const stage = stageOf(g);
  const rc = ratingClass(g.rating);
  const yr = yearNum(g.releaseDate) || '‚Äî';
  const genre1 = (g.genre || '').split(',')[0].trim();
  const eaBadge = stage === 'ea' ? `<span class="badge-ea">Early Access</span>` : '';

  return `
  <div class="game-card-list" onclick="openGame('${g.appId}')">
    <img class="gcl-img" src="${g.img}" alt="${cleanTitle(g.title)}" loading="lazy" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22148%22 height=%2284%22%3E%3Crect fill=%22%231c2333%22 width=%22100%25%22 height=%22100%25%22/%3E%3C/svg%3E'">
    <div class="gcl-body">
      <div class="gcl-title">${cleanTitle(g.title)} ${eaBadge}</div>
      <div class="gcl-meta">
        ${genre1 ? `<span class="gcl-genre">${genre1}</span>` : ''}
        ${yr !== '‚Äî' ? `<span class="gcl-year">${yr}</span>` : ''}
        ${g.rating ? `<span class="rating-dot ${rc}">${g.rating}%</span>` : ''}
      </div>
    </div>
    <div class="gcl-right">
      ${priceBlock(g)}
    </div>
  </div>`;
}

function buildGridCard(g) {
  const stage = stageOf(g);
  const rc = ratingClass(g.rating);
  const genre1 = (g.genre || '').split(',')[0].trim();

  return `
  <div class="game-card-grid" onclick="openGame('${g.appId}')">
    <img class="gcg-img" src="${g.img}" alt="${cleanTitle(g.title)}" loading="lazy" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22320%22 height=%22180%22%3E%3Crect fill=%22%231c2333%22 width=%22100%25%22 height=%22100%25%22/%3E%3C/svg%3E'">
    <div class="gcg-body">
      <div class="gcg-title">${cleanTitle(g.title)}</div>
      <div class="gcg-bottom">
        <span class="gcg-genre">${genre1 || ''}</span>
        ${g.rating ? `<span class="rating-dot ${rc}">${g.rating}%</span>` : ''}
      </div>
      <div style="margin-top:6px;">${priceBlock(g)}</div>
    </div>
  </div>`;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function openGame(id) {
  const g = games[id];
  if (!g) return;

  screens = (g.screenshots || []).filter(Boolean);
  screenIdx = 0;
  const stage = stageOf(g);

  /* –ë–∞–Ω–µ—Ä */
  const hero = screens[0] || g.img;
  document.getElementById('gmBg').style.backgroundImage = `url(${hero})`;

  /* Cover + title */
  document.getElementById('gmCover').src = g.img;
  document.getElementById('gmCover').alt = cleanTitle(g.title);
  document.getElementById('gmTitle').textContent = cleanTitle(g.title);

  /* –ë–µ–π–¥–∂—ñ */
  let badges = '';
  if (stage === 'ea')       badges += `<span class="gm-badge gm-badge-ea">Early Access</span>`;
  if (stage === 'free')     badges += `<span class="gm-badge gm-badge-free">Free to Play</span>`;
  if (stage === 'demo')     badges += `<span class="gm-badge gm-badge-demo">Demo</span>`;
  if (stage === 'upcoming') badges += `<span class="gm-badge gm-badge-coming">–ù–µ–∑–∞–±–∞—Ä–æ–º</span>`;
  document.getElementById('gmBadges').innerHTML = badges;

  /* –ì–∞–ª–µ—Ä–µ—è */
  document.getElementById('gmMain').src = screens[0] || g.img;
  document.getElementById('gmThumbs').innerHTML = screens.map((s,i) =>
    `<img src="${s}" class="gm-thumb${i===0?' active':''}" loading="lazy" onclick="setSlide(${i},this)">`
  ).join('');

  /* –û–ø–∏—Å */
  document.getElementById('gmDesc').textContent = g.description || '';

  /* –ú–µ—Ç–∞ */
  const dp = (g.devPublisher || '').split(',');
  const dev = dp[0]?.trim() || '–ù/–î';
  const pub = dp[1]?.trim() || dev;
  let dateStr = fmtDate(g.releaseDate);
  if (stage === 'upcoming') {
    const parts = (g.stage || '').split(',');
    if (parts.length > 1) dateStr = parts[1].trim();
  }
  const rc = ratingColor(g.rating);
  const rl = ratingLabel(g.rating);

  document.getElementById('gmMeta').innerHTML = `
    <div class="gm-meta-row"><span class="gm-meta-key">–ñ–∞–Ω—Ä</span><span class="gm-meta-val">${g.genre || '–ù/–î'}</span></div>
    <div class="gm-meta-row"><span class="gm-meta-key">–†–æ–∑—Ä–æ–±–Ω–∏–∫</span><span class="gm-meta-val">${dev}</span></div>
    <div class="gm-meta-row"><span class="gm-meta-key">–í–∏–¥–∞–≤–µ—Ü—å</span><span class="gm-meta-val">${pub}</span></div>
    <div class="gm-meta-row"><span class="gm-meta-key">–†–µ–ª—ñ–∑</span><span class="gm-meta-val">${dateStr}</span></div>
    ${g.rating ? `
    <div class="gm-meta-row">
      <span class="gm-meta-key">–í—ñ–¥–≥—É–∫–∏ Steam</span>
      <span class="gm-meta-val" style="color:${rc};font-weight:700">${g.rating}% ‚Äî ${rl}</span>
    </div>
    <div class="gm-rating-bar">
      <div class="gm-rating-fill" style="width:${g.rating}%;background:${rc}"></div>
    </div>` : ''}
    ${g.tags ? `<div class="gm-meta-row"><span class="gm-meta-key">–¢–µ–≥–∏</span><span class="gm-meta-val" style="font-size:11px;">${g.tags}</span></div>` : ''}
  `;

  /* –¶—ñ–Ω–∞ */
  let priceHtml = '';
  if (stage === 'upcoming') {
    priceHtml = `<div class="gm-price-label" style="color:#d29922">‚è≥ –ù–µ–∑–∞–±–∞—Ä–æ–º</div>`;
  } else if (stage === 'demo') {
    priceHtml = `<div class="gm-price-label" style="color:#a371f7">üéÆ Demo</div>`;
  } else if (stage === 'free' || !g.currentPrice) {
    priceHtml = `<div class="gm-price-label" style="color:#3fb950">üÜì –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ</div>`;
  } else {
    priceHtml = `<div class="gm-price-main">`;
    if (g.discount > 0) priceHtml += `<span class="gm-price-disc-big">-${g.discount}%</span><span class="gm-price-old-big">${g.basePrice} ‚Ç¥</span>`;
    priceHtml += `<span class="gm-price-big">${g.currentPrice} ‚Ç¥</span></div>`;
    if (g.histLow) {
      priceHtml += `<div class="gm-hist-info">
        –Ü—Å—Ç. –º—ñ–Ω—ñ–º—É–º: <span class="gm-hist-val">${g.histLow} ‚Ç¥</span> (${fmtDate(g.histLowDate)})<br>
        –ú—ñ–Ω. –∑–∞ 2 —Ä–æ–∫–∏: <span class="gm-hist-2y">${g.low2Y || g.currentPrice} ‚Ç¥</span>
      </div>`;
    }
  }
  priceHtml += `<a href="${g.link}" target="_blank" class="gm-steam-btn"><i class="fab fa-steam"></i> –í—ñ–¥–∫—Ä–∏—Ç–∏ —É Steam</a>`;
  document.getElementById('gmPrice').innerHTML = priceHtml;

  /* –°–∏—Å—Ç–µ–º–Ω—ñ –≤–∏–º–æ–≥–∏ */
  const sysEl = document.getElementById('gmSys');
  if (g.sysReq) {
    const [mn, rec] = g.sysReq.split('||');
    sysEl.style.display = 'grid';
    sysEl.innerHTML = `
      <div class="gm-sysreq-col">
        <div class="gm-sysreq-title">–ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ</div>
        <div class="gm-sysreq-text">${(mn||'').replace(/\n/g,'<br>')}</div>
      </div>
      <div class="gm-sysreq-col">
        <div class="gm-sysreq-title">–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ</div>
        <div class="gm-sysreq-text">${(rec||'‚Äî').replace(/\n/g,'<br>')}</div>
      </div>`;
  } else {
    sysEl.style.display = 'none';
  }

  /* –í—ñ–¥–∫—Ä–∏—Ç–∏ */
  const modal = document.getElementById('gameModal');
  modal.classList.add('open');
  document.body.style.overflow = 'hidden';
  modal.scrollTop = 0;
}

function setSlide(i, el) {
  screenIdx = i;
  const src = screens[i];
  document.getElementById('gmMain').src = src;
  document.getElementById('gmBg').style.backgroundImage = `url(${src})`;
  document.querySelectorAll('.gm-thumb').forEach(t => t.classList.remove('active'));
  el.classList.add('active');
  el.scrollIntoView({ behavior:'smooth', block:'nearest', inline:'center' });
}

function changeSlide(step) {
  if (!screens.length) return;
  screenIdx = (screenIdx + step + screens.length) % screens.length;
  const src = screens[screenIdx];
  document.getElementById('gmMain').src = src;
  document.getElementById('gmBg').style.backgroundImage = `url(${src})`;
  const thumbs = document.querySelectorAll('.gm-thumb');
  thumbs.forEach(t => t.classList.remove('active'));
  if (thumbs[screenIdx]) {
    thumbs[screenIdx].classList.add('active');
    thumbs[screenIdx].scrollIntoView({ behavior:'smooth', block:'nearest', inline:'center' });
  }
}

function closeModal() {
  document.getElementById('gameModal').classList.remove('open');
  document.body.style.overflow = '';
}

function handleOverlay(e) {
  if (e.target === document.getElementById('gameModal')) closeModal();
}

document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

init();
</script>
